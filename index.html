<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>W1ntNET</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>

    <div id="auth-screen" class="overlay">
        <div class="glass-card auth-box">
            <img src="assets/icon.png" class="auth-logo" alt="W1ntNET">
            <h2>–í–æ–π—Ç–∏ –≤ W1ntNET</h2>
            <p>–ë–æ—Ç —Å–æ–∑–¥–∞—Å—Ç –≤–∞—à –ø—Ä–æ—Ñ–∏–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏</p>
            <div id="tg-login-container">
                <script async src="https://telegram.org/js/telegram-widget.js?22" 
                    data-telegram-login="W1ntNetAuthBot" 
                    data-size="large" 
                    data-onauth="onTelegramAuth(user)" 
                    data-request-access="write"></script>
            </div>
        </div>
    </div>

    <div id="app" style="display: none;">
        <header class="main-header">
            <div class="header-content">
                <img src="assets/icon.png" class="mini-logo">
                <nav class="tabs">
                    <button id="feed-btn" class="active" onclick="switchTab('feed')">–õ–µ–Ω—Ç–∞</button>
                    <button id="chats-btn" onclick="switchTab('chats')">–ß–∞—Ç—ã</button>
                </nav>
                <div id="admin-badge" class="admin-icon" style="display:none">üõ†</div>
            </div>
        </header>

        <main class="container">
            <section id="admin-panel" class="admin-panel" style="display:none">
                <h3>–ê–¥–º–∏–Ω-—Ü–µ–Ω—Ç—Ä</h3>
                <div class="admin-row">
                    <input type="text" id="target-id" placeholder="Telegram ID">
                    <button onclick="grantVerify()">–í—ã–¥–∞—Ç—å Verify</button>
                </div>
            </section>

            <div class="composer glass-card">
                <textarea id="post-text" placeholder="–ß—Ç–æ –Ω–æ–≤–æ–≥–æ?"></textarea>
                <div id="preview-container"></div>
                <div class="composer-actions">
                    <label class="attach-btn">
                        üì∏ –§–æ—Ç–æ <input type="file" id="post-img" hidden onchange="previewImage()">
                    </label>
                    <button onclick="createPost()" class="btn-send">–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å</button>
                </div>
            </div>

            <div id="feed-list"></div>
        </main>
    </div>

    <script src="script.js"></script>
</body>
</html>
